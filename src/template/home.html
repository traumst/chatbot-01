<!DOCTYPE html>
<html>
  <head>
    <title>Query Tracker</title>
    <!-- Include htmx from CDN -->
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
  </head>
  <body>
    <h1>Welcome to Query Tracker</h1>

    <!-- Form to submit a query using htmx -->
    <form
      hx-post="/query"
      hx-target="#log"
      hx-swap="beforeend"
    >
      <label for="query_text">Ask model:</label>
      <input
        type="text"
        name="query_text"
        id="query_text"
        placeholder="Enter your query"
        minlength="5"
        maxlength="128"
        required
      />
      <button type="submit">Send</button>
    </form>

    <!-- Reset form on page load -->
    <script>
      document.addEventListener('htmx:afterRequest', evt => evt.target.reset());
    </script>

    <!-- Div to display log entries -->
    <div id="log">
      {% for entry in logs %} {% include 'log_entry.html' %} {% endfor %}
    </div>
  </body>
</html>
